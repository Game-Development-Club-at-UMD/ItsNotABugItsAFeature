[gd_scene load_steps=14 format=3 uid="uid://dsv5ih6knxyxl"]

[ext_resource type="Script" uid="uid://wcnsakjm3t4m" path="res://Main/main.gd" id="1_ib3t1"]
[ext_resource type="PackedScene" uid="uid://1sajrvnamtf7" path="res://Player/player.tscn" id="1_yh5la"]
[ext_resource type="Texture2D" uid="uid://bt4y35ytc4b6w" path="res://Assets/BG.png" id="2_ib3t1"]
[ext_resource type="Script" uid="uid://cqxshwjioubny" path="res://2D Tools/CameraShake.gd" id="2_liyct"]
[ext_resource type="PackedScene" uid="uid://cxittwhcv7xg" path="res://Items/ItemSpawner/ItemSpawner.tscn" id="3_ib3t1"]
[ext_resource type="PackedScene" uid="uid://dd8padwwgwlvi" path="res://Spawner/wave_system.tscn" id="5_k3v36"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_f6fdm"]
size = Vector2(148, 2720)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ib3t1"]
size = Vector2(2182, 129)

[sub_resource type="NavigationPolygon" id="NavigationPolygon_k3v36"]
vertices = PackedVector2Array(748.8672, 1077.1719, 738.78125, 1075.1484, 743.35156, 1052.5469, 1053.3125, 44.539063, 1227.6172, 29, 1369, 29, 1037.7734, 87.72656, 1103.0391, 843.72656, 902.5078, 941.0625, 920.47656, 895.6172, 963.2969, 796.78125, 1015.8906, 759.53906, 1109.1797, 827.3906, -17.859375, 200.78125, -13.21875, 145.0625, 861.64844, 123.09375, 945.1797, 140.67969, 1347.2891, 346.0703, 266.79688, 435.2422, 194.21094, 432.9375, 634.5703, -374.17188, 862, -410.35938, 1070.5391, -347.60156, 918.8906, -348.20313, 498.1172, -170.20313, 834.3125, -206.79688, 995.71875, -163.17969, 488.57813, -162.35156, 893.8203, 920.0703, 1369, -504.35156, 1994.1406, -779.9531, 1782.7813, 1804.9531, 1370.0703, 1100.9609, 1364.9375, 348.04688, 799.75, 739.7422, 873.9531, 717.2031, 867.5703, 725.03906, 790.0469, 764.34375, 1264.1094, 758.4375, 1253.5938, 850.78125, 1237.4609, 821.6328, -791.6875, -769.03906, 1256.1484, -503.03906, 635.3594, -500.9375, 42.5, 691.14844, 23.3125, 743.09375, 5.203125, 708.9219, 2.7890625, 646.3594, 843.4297, 102.07031, 749.8906, 1020.2578, 756.2031, 989.09375, 815.75, 918.7578, -32.929688, -100.39844, -92.49219, -236, 20.703125, -206, 365.9922, -321.78125, 320.71875, -397.21875, 318.71094, -416.21875, 425.78906, -349.9922, 431.6172, -226.70313, 1211.5, 785.78125, 1115.2188, 707.96875, 1037.8828, 697.10156, -716.28125, 1794.0391, -236.03906, 1107.0391, -234.97656, 812.5625, 1025.7578, -182.85938, 1073.3984, -180.64844, 1144.7891, -96.32031, 1010.65625, 35.71875, 752.65625, -471.89063, 836.8906, -443.5, 654.21094, -465.60938, 628.53125, -491.39063, 1255.4297, -500.45313, 558.97656, -496.02344, 506.84375, -506.07813, 1061.0313, -251.57813, 1049.3438, -250.35156, 1053.9375, -274.53125, 1144.5313, -195.77344, 1083.8906, -216.61719, 155.71875, 547.03125, 151.71875, 558.6328, 117.49219, 536.34375, 110.35156, 491.78906, 89.50781, 533.0469, -93.609375, 194.60156, -205.34375, 793.28906, -231.97656, 62.507813, 1121.2031, 693.7969, 1293.1328, 614.3672, 988.28906, 110.5, 284.10156, 655.1875, 270.5078, 595, 311.3203, 595, 970.40625, 651.27344, 1152.2578, -196.24219, 1151.0391, -184.89063, -39.9375, 797.6406, -51.078125, 750.2578, 47.90625, 806.3672, 51.421875, 861.59375, 1055.0938, -310.04688, 1024.7109, -326.9375, 524.1875, 886.0703, 369.79688, 1061.1016, 336.15625, 1024.9375, 291.9297, -501.78125, 292.21875, -498.96094, -234.03906, -496.96094, 1003.34375, 684.1875, 1033.5625, 686.3672, 79.171875, 659.0703, -220.14063, 67.77344, 73.5, 594.65625, 89.140625, 633.78125, 809.27344, 706.28906, 791.53906, 727.25, 192.67188, 788.89844, 196.1875, 718.53906, 220.64063, 665.34375, 490.57813, -203.35938, 850.2422, -284.1797, 1314.1875, 487.03906, 282.65625, 496.4375, -86.03125, 787.9297, -113.53906, 823.03125, -151.10938, 801.5703, -123.359375, 744.53125, 711.5, 962.03125, 411.27344, -156.67969, 848.71875, 66.78906, 335.79688, -140.0625, 920.6094, 659.78125, 890.64844, 696.6406, 871.90625, 687.27344, 936.4297, 821.52344, 835, 834.46094, 878.8125, 878.9531, 795.6719, 802.28906, 829.96094, 880.1719, 956.3672, 50.796875, 115.11719, 464.79688, 986.28125, 82.578125, 953.8125, 74.53125, 904.6328, 79.86719, 179.82813, -131.07813, 294.0703, -181.78906, -58.023438, 140.42969, 239.8125, 974.22656, 129.46094, 814.1875, 520.3125, -382.8672, 863.8828, -341.03125, 35.773438, -206, 120.78906, -144.71094, 1081.2188, 662.84375, 330.34375, -223.1875, 291.72656, -232.21875, 287.77344, -256.9375, 422.32813, -217.53125, 1050.9688, 664.21875, 520.6172, -493.27344, -182.10156, 806.5625, -149.71094, 693.02344, -131.17188, 629.28906, -62.773438, 604.9531, 434.14063, -186.54688, 392.5703, -208.49219, 983.6094, -327.96094, 311.04688, -219.97656, 144.54688, 657.9219, 154.71094, 635.9219)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2), PackedInt32Array(3, 4, 5, 6), PackedInt32Array(7, 8, 9, 10, 11, 12), PackedInt32Array(13, 14, 15, 16, 17, 18, 19), PackedInt32Array(20, 21, 22, 23), PackedInt32Array(24, 25, 26, 27), PackedInt32Array(28, 9, 8), PackedInt32Array(5, 29, 30, 31, 32), PackedInt32Array(5, 32, 33), PackedInt32Array(34, 35, 36, 37), PackedInt32Array(38, 39, 40), PackedInt32Array(41, 30, 29, 42, 43), PackedInt32Array(44, 45, 46, 47), PackedInt32Array(48, 15, 14), PackedInt32Array(28, 8, 49, 50, 51), PackedInt32Array(52, 53, 54), PackedInt32Array(55, 56, 57, 58, 59), PackedInt32Array(38, 40, 60), PackedInt32Array(61, 38, 60, 12, 11, 62), PackedInt32Array(32, 31, 63, 64), PackedInt32Array(64, 63, 41, 65), PackedInt32Array(66, 67, 68, 4, 3, 69, 26), PackedInt32Array(70, 71, 21, 20, 72), PackedInt32Array(72, 20, 73, 43), PackedInt32Array(29, 74, 42), PackedInt32Array(41, 43, 73, 75, 76), PackedInt32Array(77, 78, 79), PackedInt32Array(77, 79, 80, 81), PackedInt32Array(82, 83, 84, 85), PackedInt32Array(85, 84, 86, 87), PackedInt32Array(88, 65, 41, 89), PackedInt32Array(90, 91, 38, 61), PackedInt32Array(92, 6, 5, 33, 17, 16), PackedInt32Array(93, 94, 95, 91, 96), PackedInt32Array(80, 97, 98, 67), PackedInt32Array(99, 100, 46, 45, 101, 102), PackedInt32Array(22, 103, 104), PackedInt32Array(105, 106, 107), PackedInt32Array(108, 109, 110, 41), PackedInt32Array(67, 81, 80), PackedInt32Array(62, 11, 111, 112), PackedInt32Array(113, 44, 47, 114, 87, 115, 116), PackedInt32Array(117, 118, 119, 120, 121, 93), PackedInt32Array(25, 24, 122, 123), PackedInt32Array(124, 91, 95, 125), PackedInt32Array(126, 127, 128, 129), PackedInt32Array(51, 50, 130), PackedInt32Array(131, 132, 48, 14, 133), PackedInt32Array(134, 135, 136), PackedInt32Array(17, 124, 125, 18), PackedInt32Array(137, 10, 9), PackedInt32Array(138, 137, 9, 139), PackedInt32Array(140, 138, 139, 141, 119), PackedInt32Array(67, 98, 68), PackedInt32Array(131, 27, 26, 69, 142), PackedInt32Array(13, 19, 143, 87), PackedInt32Array(144, 6, 92), PackedInt32Array(144, 92, 145, 142), PackedInt32Array(131, 142, 145, 146, 132), PackedInt32Array(147, 148, 133, 14, 149, 114), PackedInt32Array(119, 105, 107, 150, 102, 151), PackedInt32Array(152, 20, 153, 123, 122, 59, 58), PackedInt32Array(52, 54, 154, 155), PackedInt32Array(119, 118, 34, 37), PackedInt32Array(119, 37, 140), PackedInt32Array(91, 90, 156), PackedInt32Array(157, 158, 159, 55, 59, 160), PackedInt32Array(119, 141, 51, 105), PackedInt32Array(161, 112, 111, 96), PackedInt32Array(87, 143, 85), PackedInt32Array(75, 162, 76), PackedInt32Array(41, 76, 108), PackedInt32Array(41, 110, 89), PackedInt32Array(128, 163, 88, 89, 114, 164), PackedInt32Array(51, 130, 105), PackedInt32Array(101, 151, 102), PackedInt32Array(100, 99, 126, 129), PackedInt32Array(164, 129, 128), PackedInt32Array(165, 164, 114), PackedInt32Array(166, 165, 114), PackedInt32Array(87, 86, 115), PackedInt32Array(47, 166, 114), PackedInt32Array(167, 27, 131), PackedInt32Array(167, 131, 168, 160), PackedInt32Array(160, 168, 157), PackedInt32Array(52, 155, 147, 114), PackedInt32Array(22, 104, 169, 23), PackedInt32Array(20, 23, 153), PackedInt32Array(158, 157, 170), PackedInt32Array(158, 170, 148, 147), PackedInt32Array(114, 149, 87), PackedInt32Array(171, 113, 116, 172), PackedInt32Array(171, 172, 121, 120), PackedInt32Array(136, 117, 93, 134), PackedInt32Array(156, 161, 96, 91), PackedInt32Array(134, 93, 96)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-802, -779, -726, 1804, 1792, 1815, 2005, -790)])

[sub_resource type="Animation" id="Animation_rj11h"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CanvasLayer/ColorRect:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CanvasLayer/ColorRect:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_ib3t1"]
resource_name = "fade_in"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CanvasLayer/ColorRect:visible")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CanvasLayer/ColorRect:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}

[sub_resource type="Animation" id="Animation_f6fdm"]
resource_name = "fade_out"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CanvasLayer/ColorRect:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CanvasLayer/ColorRect:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_qac2q"]
_data = {
&"RESET": SubResource("Animation_rj11h"),
&"fade_in": SubResource("Animation_ib3t1"),
&"fade_out": SubResource("Animation_f6fdm")
}

[node name="Main" type="Node2D"]
script = ExtResource("1_ib3t1")

[node name="Camera2D" type="Camera2D" parent="." groups=["camera"]]
position = Vector2(566, 304)
zoom = Vector2(1.2, 1.2)
limit_left = -150
limit_top = -435
limit_right = 1295
limit_bottom = 1020
script = ExtResource("2_liyct")
metadata/_edit_lock_ = true

[node name="Background" type="Sprite2D" parent="."]
z_index = -1
position = Vector2(569, 302)
scale = Vector2(0.30442306, 0.30442306)
texture = ExtResource("2_ib3t1")

[node name="Player" parent="." groups=["players"] instance=ExtResource("1_yh5la")]
scale = Vector2(1.2, 1.2)
collision_mask = 129

[node name="Walls" type="Node2D" parent="."]

[node name="Wall2" type="StaticBody2D" parent="Walls"]
collision_layer = 128
collision_mask = 128

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/Wall2"]
position = Vector2(-233, 615)
shape = SubResource("RectangleShape2D_f6fdm")

[node name="Wall" type="StaticBody2D" parent="Walls"]
collision_layer = 128
collision_mask = 128

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/Wall"]
position = Vector2(1369, 599)
shape = SubResource("RectangleShape2D_f6fdm")

[node name="Floor" type="StaticBody2D" parent="Walls"]
collision_layer = 128
collision_mask = 128

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/Floor"]
position = Vector2(630, 1085)
shape = SubResource("RectangleShape2D_ib3t1")

[node name="Ceiling" type="StaticBody2D" parent="Walls"]
collision_layer = 128
collision_mask = 128

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/Ceiling"]
position = Vector2(616, -499)
shape = SubResource("RectangleShape2D_ib3t1")

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
visible = false
navigation_polygon = SubResource("NavigationPolygon_k3v36")

[node name="StaticBody2D" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D"]
polygon = PackedVector2Array(857, 79, 904, 90, 950, 85, 973, 109, 943, 130, 867, 114, 854, 99)

[node name="StaticBody2D2" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D2"]
polygon = PackedVector2Array(975, 56, 1011, 46, 1040, 52, 1031, 77, 991, 73)

[node name="StaticBody2D3" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D3"]
polygon = PackedVector2Array(96, 624, 84, 594, 97, 544, 114, 546, 157, 574, 167, 545, 121, 489, 124, 472, 196, 443, 259, 445, 273, 499, 298, 585, 258, 585, 272, 647, 222, 655, 157, 626)

[node name="StaticBody2D4" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D4"]
polygon = PackedVector2Array(838, 824, 805, 797, 801, 770, 874, 733, 926, 669, 967, 662, 994, 689, 1005, 755, 957, 789, 932, 812)

[node name="StaticBody2D5" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D5"]
polygon = PackedVector2Array(83, 669, 140, 668, 186, 722, 183, 782, 128, 804, 55, 797, 34, 743, 51, 697)

[node name="StaticBody2D6" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D6"]
polygon = PackedVector2Array(-139, 692, -123, 637, -64, 616, -7, 652, -5, 704, -54, 740, -117, 735)

[node name="StaticBody2D7" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D7"]
polygon = PackedVector2Array(-225, 818, -205, 805, -184, 817, -153, 812, -111, 836, -82, 799, -44, 807, 46, 870, 235, 983, 330, 1033, 370, 1076, 527, 898, 707, 971, 745, 994, 727, 1083, 762, 1090, 749, 1032, 907, 950, 1111, 851, 1117, 835, 1208, 798, 1229, 827, 1260, 883, 1274, 760, 1303, 616, 1324, 489, 1355, 357, 1360, 1091, -226, 1097)

[node name="StaticBody2D8" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D8"]
polygon = PackedVector2Array(1045, 688, 1056, 674, 1078, 673, 1109, 697)

[node name="StaticBody2D9" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D9"]
polygon = PackedVector2Array(804, 728, 815, 715, 871, 698, 883, 704)

[node name="StaticBody2D10" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D10"]
polygon = PackedVector2Array(-45, -103, -222, 56, -224, -487, 301, -489, 311, -394, 353, -324, 277, -261, 281, -236, 177, -142, 125, -154, 39, -216, 22, -216, -110, -251)

[node name="StaticBody2D11" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D11"]
polygon = PackedVector2Array(306, -184, 318, -211, 330, -213, 385, -200, 398, -164, 339, -151)

[node name="StaticBody2D12" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D12"]
polygon = PackedVector2Array(434, -215, 442, -194, 487, -174, 482, -196)

[node name="StaticBody2D13" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D13"]
polygon = PackedVector2Array(846, -214, 860, -282, 872, -332, 918, -338, 982, -318, 1022, -317, 1049, -302, 1037, -239, 1056, -241, 1073, -215, 1066, -191, 1023, -193, 994, -174)

[node name="StaticBody2D14" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D14"]
polygon = PackedVector2Array(1155, -99, 1233, 19, 1359, 19, 1359, -494, 1242, -490, 1174, -469, 1180, -392, 1196, -382, 1165, -221, 1161, -184)

[node name="StaticBody2D15" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D15"]
polygon = PackedVector2Array(427, -361, 519, -393, 624, -385, 619, -482, 559, -486, 517, -483, 503, -496, 303, -492, 309, -434)

[node name="StaticBody2D16" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D16"]
polygon = PackedVector2Array(652, -491, 660, -476, 754, -482, 843, -452, 868, -419, 1084, -354, 1056, -286, 1148, -206, 1164, -207, 1243, -493)

[node name="StaticBody2D17" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D17"]
polygon = PackedVector2Array(830, 909, 837, 890, 877, 889, 902, 899, 890, 910)

[node name="StaticBody2D18" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D18"]
polygon = PackedVector2Array(-76, 186, -53, 151, -24, 154, -27, 190)

[node name="FadePlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_qac2q")
}

[node name="WaveSystem" parent="." instance=ExtResource("5_k3v36")]

[node name="SpawnLocations" type="Node2D" parent="."]

[node name="Spawner1" type="Marker2D" parent="SpawnLocations" groups=["spawn"]]
position = Vector2(-565, 376)

[node name="Spawner2" type="Marker2D" parent="SpawnLocations" groups=["spawn"]]
position = Vector2(585, -654)

[node name="Spawner3" type="Marker2D" parent="SpawnLocations" groups=["spawn"]]
position = Vector2(1556, 410)

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="ItemSpawner" parent="CanvasLayer" instance=ExtResource("3_ib3t1")]
position = Vector2(564.00006, 272.00003)
scale = Vector2(1.9582092, 1.9582092)

[node name="ColorRect" type="ColorRect" parent="CanvasLayer"]
visible = false
z_index = 2
offset_right = 1161.0
offset_bottom = 654.0
mouse_filter = 2
color = Color(0, 0, 0, 1)
